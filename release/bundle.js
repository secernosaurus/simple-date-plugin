!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){window.DatePlugin=class{constructor(){this.list={},this.dateList=[],this.weekArr=["周一","周二","周三","周四","周五","周六","周日"]}heart(e=new Date){let t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),r=new Date(t,n,1).getDay();r=0==r?7:r;let l=new Date(t,n+1,0).getDate(),i=new Date(t,n,0).getDate(),o=[],s=[];for(let e=1;e<43;e++){let c={};c.weak=e%7,c.isShow=!1,e>=r&&e<=l+r-1?(c.date=new Date(t,n,1+e-r).toLocaleDateString().split("/").join("-"),c.day=new Date(t,n,1+e-r).getDate(),c.isShow=!0,c.dateBg=c.day===a?"sel-color":""):e<r?(c.date=new Date(t,n-1,i-(r-e-1)).toLocaleDateString().split("/").join("-"),c.day=new Date(t,n-1,i-(r-e-1)).getDate()):(c.date=new Date(t,n+1,e-(l+r-1)).toLocaleDateString().split("/").join("-"),c.day=new Date(t,n+1,e-(l+r-1)).getDate()),s.push(c),e%7==0&&(o.push(s),s=[])}this.dateList=o;let c=document.createDocumentFragment(),d=document.createElement("div");d.setAttribute("class","calendar");for(let e=0;e<o.length;e++){let t=document.createElement("ul");for(let n=0;n<o[e].length;n++){let a=document.createElement("li"),r=document.createElement("span");r.innerText=o[e][n].day,!1===o[e][n].isShow?r.setAttribute("class","bgcolor"):o[e][n].dateBg&&r.setAttribute("class",o[e][n].dateBg),a.appendChild(r),t.appendChild(a)}d.appendChild(t)}return c.appendChild(d),c}setHeader(e){let t=document.createDocumentFragment(),n=e.getFullYear(),a=e.getMonth(),r=e.getDate(),l=document.createElement("div");return l.setAttribute("id","header"),l.innerHTML=`\n      <a href="javascript:;" class="prev"><</a>\n      <span class="current-date">${[n,this.zeroPad(a+1),this.zeroPad(r)].join("-")}</span>\n      <a href="javascript:;" class="next">></a>\n    `,t.appendChild(l),t}setWeek(){let e=document.createElement("ul");e.setAttribute("id","week");for(let t=0;t<this.weekArr.length;t++){let n=document.createElement("li");n.innerText=this.weekArr[t],e.appendChild(n)}return e}setCalendar(e=new Date){e=e?new Date(e):new Date;let t=document.createDocumentFragment(),n=this.setHeader(e);t.appendChild(n);let a=this.setWeek();t.appendChild(a);let r=this.heart(e),l=document.createElement("div");return l.setAttribute("id","calendar"),l.appendChild(r),t.appendChild(l),t}getAngle(e,t){return 180*Math.atan2(t,e)/Math.PI}getDirection(e,t,n,a){let r=n-e,l=a-t,i=0;if(Math.abs(r)<2&&Math.abs(l)<2)return i;let o=this.getAngle(r,l);return o>=-135&&o<=-45?i=1:o>45&&o<135?i=2:o>=135&&o<=180||o>=-180&&o<-135?i=3:o>=-45&&o<=45&&(i=4),i}init(){let e=document.getElementById("header"),t=document.querySelector(".prev"),n=document.querySelector(".next");/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?(this.moveDate(),e.removeChild(t),e.removeChild(n),e.setAttribute("class","center")):this.switchDate(),this.updateStyl(),this.handleClick()}switchDate(){let e=document.querySelector(".prev"),t=document.querySelector(".next");e.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("-")}),t.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("+")})}moveDate(){let e,t,n,a,r=document.getElementById("list");r.addEventListener("touchstart",n=>{e=n.touches[0].pageX||n.targetTouches[0].pageX,t=n.touches[0].pageY||n.targetTouches[0].pageY},!1),r.addEventListener("touchend",r=>{switch(n=r.changedTouches[0].pageX||r.targetTouches[0].pageX,a=r.changedTouches[0].pageY||r.targetTouches[0].pageY,this.getDirection(e,t,n,a)){case 0:break;case 1:this.plusMinus("-");break;case 2:case 3:this.plusMinus("+");break;case 4:this.plusMinus("-")}},!1)}updateStyl(){let e=document.querySelectorAll("#calendar ul li"),t=e[0].offsetWidth;for(let n=0;n<e.length;n++){e[n].style.height=t+"px",e[n].style.lineHeight=t+"px";let a=e[n].querySelector("span");a.style.width=.8*t+"px",a.style.height=.8*t+"px",a.style.lineHeight=.8*t+"px",a.style.display="inline-block"}}handleClick(){document.getElementById("calendar").addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("calendar"),n=document.querySelector(".calendar"),a=document.querySelector(".current-date"),r=new Date(a.innerText),l=r.getFullYear(),i=r.getMonth(),o=document.querySelector(".sel-color");if("SPAN"===e.target.nodeName&&"bgcolor"!==e.target.className){let t=e.target.innerText,n=new Date(l,i,t).toLocaleDateString().split("/");a.innerText=[n[0],this.zeroPad(parseInt(n[1])),this.zeroPad(n[2])].join("-"),o.className="",e.target.setAttribute("class","sel-color")}else if("SPAN"===e.target.nodeName&&"bgcolor"===e.target.className){let r=e.target.innerText;r>15?--i<0&&(l--,i=11):++i>11&&(l++,i=0),t.removeChild(n);let s=new Date(l,i,r).toLocaleDateString().split("/");a.innerText=[s[0],this.zeroPad(parseInt(s[1])),this.zeroPad(s[2])].join("-"),o.className="",e.target.setAttribute("class","sel-color"),t.appendChild(this.heart(new Date(l,i,r))),this.updateStyl()}})}zeroPad(e){return String(e<10?"0"+e:e)}plusMinus(e){let t=document.getElementById("calendar"),n=document.querySelector(".calendar"),a=document.querySelector(".current-date"),r=new Date(a.innerText),l=r.getFullYear(),i=r.getMonth(),o=r.getDate();"+"===e?++i>11&&(l++,i=0):--i<0&&(l--,i=11),t.removeChild(n);let s=new Date(l,i,o).toLocaleDateString().split("/");a.innerText=[s[0],this.zeroPad(parseInt(s[1])),this.zeroPad(s[2])].join("-"),t.appendChild(this.heart(new Date(l,i,o))),this.updateStyl()}}}]);