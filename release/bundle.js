!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){window.DatePlugin=class{constructor(){this.list={},this.dateList=[],this.weekArr=["一","二","三","四","五","六","日"]}heart(e=new Date){let t=e.getFullYear(),n=e.getMonth(),r=this.list.currentDate.getFullYear(),a=this.list.currentDate.getMonth(),l=this.list.currentDate.getDate(),i=new Date(t,n,1).getDay();i=0==i?7:i;let s=new Date(t,n+1,0).getDate(),u=new Date(t,n,0).getDate(),c=[],d=[];for(let e=1;e<43;e++){let o={};o.weak=e%7,o.isShow=!1,e>=i&&e<=s+i-1?(o.date=new Date(t,n,1+e-i).toLocaleDateString().split("/").join("-"),o.day=new Date(t,n,1+e-i).getDate(),o.isShow=!0,t===r&&n===a&&o.day===l&&(o.dateBg="sel-color")):e<i?(o.date=new Date(t,n-1,u-(i-e-1)).toLocaleDateString().split("/").join("-"),o.day=new Date(t,n-1,u-(i-e-1)).getDate()):(o.date=new Date(t,n+1,e-(s+i-1)).toLocaleDateString().split("/").join("-"),o.day=new Date(t,n+1,e-(s+i-1)).getDate()),d.push(o),e%7==0&&(c.push(d),d=[])}return this.dateList=c,c}setTopBtn(){let e=document.createDocumentFragment(),t=document.createElement("div");t.setAttribute("id","top"),t.setAttribute("class","top-btn");let n=document.createElement("a");n.setAttribute("class","cancel"),n.innerText="取消";let r=document.createElement("a");return r.setAttribute("class","determine"),r.innerText="确定",t.appendChild(n),t.appendChild(r),e.appendChild(t),n.addEventListener("click",e=>{e.preventDefault(),this.updateClass()}),r.addEventListener("click",e=>{e.preventDefault(),this.updateClass()}),e}setHeader(e){let t=document.createDocumentFragment(),n=e.getFullYear(),r=e.getMonth(),a=(e.getDate(),document.createElement("div"));a.setAttribute("id","header");let l=document.createElement("a");l.setAttribute("class","prev-m"),l.innerText="<";let i=document.createElement("a");i.setAttribute("class","prev-y"),i.innerText="<<";let s=document.createElement("a");s.setAttribute("class","next-m"),s.innerText=">";let u=document.createElement("a");u.setAttribute("class","next-y"),u.innerText=">>";let c=document.createElement("span");return c.setAttribute("class","current-date"),c.innerText=[n,this.zeroPad(r+1)].join("-"),a.appendChild(i),a.appendChild(l),a.appendChild(c),a.appendChild(s),a.appendChild(u),t.appendChild(a),/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&(a.removeChild(l),a.removeChild(s),a.setAttribute("class","center")),l.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("-")}),s.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("+")}),i.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("--")}),u.addEventListener("click",e=>{e.preventDefault(),this.plusMinus("++")}),t}setWeek(){let e=document.createElement("ul");e.setAttribute("id","week");for(let t=0;t<this.weekArr.length;t++){let n=document.createElement("li");n.innerText=this.weekArr[t],e.appendChild(n)}return e}setCalendar(e){let t=document.createDocumentFragment(),n=this.heart(e),r=document.createElement("div");r.setAttribute("class","calendar");for(let e=0;e<n.length;e++){let t=document.createElement("ul");for(let r=0;r<n[e].length;r++){let a=document.createElement("li"),l=document.createElement("span");l.innerText=n[e][r].day,!1===n[e][r].isShow?l.setAttribute("class","bgcolor"):n[e][r].dateBg&&l.setAttribute("class",n[e][r].dateBg),a.appendChild(l),t.appendChild(a)}r.appendChild(t)}return t.appendChild(r),t}init(e=new Date){e=e?new Date(e):new Date,this.list.currentDate=e,e.getFullYear(),e.getMonth(),e.getDate();let t=document.querySelector("#inputValue input"),n=document.createDocumentFragment(),r=this.setTopBtn();n.appendChild(r);let a=this.setHeader(e);n.appendChild(a);let l=this.setWeek();n.appendChild(l);let i,s,u,c,d=this.setCalendar(e),o=document.createElement("div");return o.setAttribute("id","calendar"),o.appendChild(d),n.appendChild(o),o.addEventListener("touchstart",e=>{i=e.touches[0].pageX||e.targetTouches[0].pageX,s=e.touches[0].pageY||e.targetTouches[0].pageY},!1),o.addEventListener("touchend",e=>{switch(u=e.changedTouches[0].pageX||e.targetTouches[0].pageX,c=e.changedTouches[0].pageY||e.targetTouches[0].pageY,this.getDirection(i,s,u,c)){case 3:this.plusMinus("+");break;case 4:this.plusMinus("-")}},!1),o.addEventListener("click",e=>{e.preventDefault();let n=document.querySelector(".current-date"),r=new Date(n.innerText),a=r.getFullYear(),l=r.getMonth(),i=document.querySelector(".sel-color");if("LI"===e.target.nodeName&&"bgcolor"!==e.target.querySelector("span").className){let t=e.target.innerText;this.list.currentDate=new Date(a,l,t),i&&i.setAttribute("class",""),e.target.querySelector("span").setAttribute("class","sel-color")}else if("LI"===e.target.nodeName&&"bgcolor"===e.target.querySelector("span").className){let t=e.target.innerText;t>15?--l<0&&(a--,l=11):++l>11&&(a++,l=0);let r=new Date(a,l,1).toLocaleDateString().split("/");n.innerText=[r[0],this.zeroPad(parseInt(r[1]))].join("-"),this.list.currentDate=new Date(a,l,t),this.changeCalendar(a,l)}if("LI"===e.target.nodeName){let e=this.list.currentDate,n=e.getFullYear(),r=e.getMonth(),a=e.getDate();t.setAttribute("value",[n,this.zeroPad(r+1),this.zeroPad(a)].join("-"))}}),t.addEventListener("click",e=>{e.preventDefault(),this.updateClass()}),n}getAngle(e,t){return 180*Math.atan2(t,e)/Math.PI}getDirection(e,t,n,r){let a=n-e,l=r-t,i=0;if(Math.abs(a)<2&&Math.abs(l)<2)return i;let s=this.getAngle(a,l);return s>=135&&s<=180||s>=-180&&s<-135?i=3:s>=-45&&s<=45&&(i=4),i}zeroPad(e){return String(e<10?"0"+e:e)}plusMinus(e){let t=document.querySelector(".current-date"),n=new Date(t.innerText),r=n.getFullYear(),a=n.getMonth();"+"===e?++a>11&&(r++,a=0):"-"===e?--a<0&&(r--,a=11):"++"===e?r++:"--"===e&&r--;let l=new Date(r,a,1).toLocaleDateString().split("/");t.innerText=[l[0],this.zeroPad(parseInt(l[1]))].join("-"),this.changeCalendar(r,a)}changeCalendar(e,t){let n=this.heart(new Date(e,t,1)),r=[],a=document.querySelectorAll("#calendar ul");for(let e=0;e<a.length;e++){let t=a[e].querySelectorAll("li");r.push(t)}for(let e=0;e<r.length;e++)for(let t=0;t<r[e].length;t++){let a=r[e][t].querySelector("span");a.innerText=n[e][t].day,a.className="",!1===n[e][t].isShow?a.setAttribute("class","bgcolor"):n[e][t].dateBg&&a.setAttribute("class",n[e][t].dateBg)}}updateClass(){let e=document.getElementById("list").getAttribute("class"),t=e.indexOf("show"),n=e.indexOf("hidden");if(t>=0){e=e.substring(0,t)+"hidden"+e.substring(t+"show".length);let n=this.list.currentDate,r=n.getFullYear(),a=n.getMonth(),l=n.getDate();document.querySelector("#inputValue input").setAttribute("value",[r,this.zeroPad(a+1),this.zeroPad(l)].join("-"))}else e=e.substring(0,n)+"show"+e.substring(n+"hidden".length);document.getElementById("list").setAttribute("class",e)}}}]);